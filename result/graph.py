from graphviz import Digraph

g = Digraph('G', filename='cluster.gv')
g.attr(rankdir='LR')
g.node_attr.update(style='filled', fillcolor='white', shape='box')
colors = ['green','red','blue','orange']
with g.subgraph(name='cluster_0') as d:
	d.attr(style='filled', fillcolor='antiquewhite1')
	d.attr(rank='same')
	d.edge('../input/digit-recognizer/train.csv','data')
	d.edge('data','rmNull')
	d.edge('rmNull','rmOutliers')
	d.edge('rmOutliers','PreProssDATA')
	d.edge('PreProssDATA','split')
	d.edge('split','PreProssTrain')
	d.edge('split','PreProssTest')
	d.attr(label='Data preProcess')
with g.subgraph(name='cluster_1') as t:
	t.attr(style='filled', fillcolor='palegreen3')
	t.attr(rank='same')
	t.node('t1', style='filled', fillcolor='thistle')
	t.edge('PreProssTrain','t1')
	t.edge('PreProssTest','t1')
	t.edge('t1','t1_pca55')
	t.edge('t1_pca55','t1_pca55')
	t.edge('t1_pca55','t2')
	t.node('t2', style='filled', fillcolor='thistle')
	t.edge('t2','t2_pca55')
	t.edge('t2_pca55','t2_pca62')
	t.edge('t2_pca62','t2_std')
	t.edge('t2_std','t4')
	t.node('t4', style='filled', fillcolor='thistle')
	t.edge('t4','t4_pca55')
	t.edge('t4_pca55','t4_std')
	t.edge('t4_std','t4_std')
	t.edge('t1_pca55','t3')
	t.node('t3', style='filled', fillcolor='thistle')
	t.edge('t3','t3_pca55')
	t.edge('t3_pca55','t3_std')
	t.edge('t3_std','t3_pca62')
	t.attr(label='Data Transformation')
with g.subgraph(name='cluster_2') as tr:
	tr.attr(style='filled', fillcolor='paleturquoise')
	tr.attr(rank='same')
	tr.node('rndForest1', style='filled', fillcolor='peachpuff')
	tr.edge('t3_pca62', 'rndForest1')
	tr.node('gaussian1', style='filled', fillcolor='peachpuff')
	tr.edge('t2_std', 'gaussian1')
	tr.node('gaussian2', style='filled', fillcolor='peachpuff')
	tr.edge('t3_pca62', 'gaussian2')
	tr.node('knn1', style='filled', fillcolor='peachpuff')
	tr.edge('t1_pca55', 'knn1')
	tr.attr(label='Training')
g.view()